<!DOCTYPE html>
<html amp>
<head>
  <meta charset="UTF-8">

  <link rel="icon" href="/images/favicon/aapIcon.ico" type="image/x-icon">

  <meta name="description" content="">
  <title>attendanceauditor</title>
  
<link href="./css/aap.css" rel="stylesheet">

</head>

<body>

    <div id="header">
        <div id="headerLogo">
            <img src="./images/AAPLogo.png" alt="Attendance Auditor Plus logo" title="Attendance Auditor Plus logo">

<script src= "https://code.jquery.com/jquery-3.5.1.js"> </script> 
<script>
    function memberProfile(){
        document.location.href="memberForm.html";
    }

    function ePop(){
        document.location.href="index.html";
    }

    function invPop(){
        document.location.href="memberInventory.html";
    }
</script>
<style> 
    table { 
        margin: 0 auto; 
        font-size: large; 
        border: 1px solid black; 
    } 

    h1 { 
        text-align: center; 
        color: #006600; 
        font-size: xx-large; 
        font-family: 'Gill Sans',  
            'Gill Sans MT', ' Calibri',  
            'Trebuchet MS', 'sans-serif'; 
    } 

    td { 
        background-color: #E4F5D4; 
        border: 1px solid black; 
    } 

    th, 
    td { 
        font-weight: bold; 
        border: 1px solid black; 
        padding: 10px; 
        text-align: center; 
    } 

    td { 
        font-weight: lighter; 
    } 
</style>

</head>

<body>

    <div id="header">
        <div id="headerLogo">
            <img src="./images/AAPLogo.png" alt="Attendance Auditor Plus logo" title="Attendance Auditor Plus logo"

        </div>
        <div id="leftMenu">
            <div onclick="eventPopFunction()" id="eventMenuItem">Events</div>
            <div onclick="inventoryPopFunction()" id="inventoryMenuItem">Inventory</div>
        </div>
        <div id="rightMenu">
            <div onclick="profilePopFunction()" id="profileMenuItem">Profile</div>

        </div>

    </div>
<hr/>


    <div id="eventList"></div>
        

<script>
    var eventListDiv = document.querySelector("#eventList");

    function eventPopFunction(){
        fetch("http://localhost:5000/api/events")
        .then(response => response.json())
        .then(data => {
            eventListDiv.innerHTML = '<ul>';
            console.log(data);
            for (var i = 0; i < data.length; i++){

                
                eventListDiv.innerHTML +=  "<li class='eventListItem' > Event Title: " + data[i].title + "<br /> Description: " +
                data[i].description + " <br />" + data[i].datetime.toString() + "</li> <br /> <br />" ;

            }
            eventListDiv.innerHTML += "</ul>";
        });
    }

      
    
</script>
        <div id="leftMenu">
            <div onclick="ePop()" id="eventMenuItem">Events</div>
            <div onclick="invPop()" id="inventoryMenuItem">Inventory</div>
        </div>
        <div id="rightMenu">
            <button value="GoToMembership" onclick="memberProfile()" id="profileMenuItem">Profile</button>

        </div>
    </div>
<hr/>

<table id="eventsTable">
    <thead>
        <th>Title</th>
        <th>Description</th>
        <th>DateTime</th>
        <th>Capacity</th>
        <th>Location</th>

    </thead>
    <tbody id="eventsTBody">

        <script>
            function ePop(){
            $(document).ready(function (){
                // Fetch Data
                $.getJSON("http://localhost:5000/api/events",
                        function (data){
                            var dynEvents = '';

                            // Iterating through objects
                            $.each(data, function(key,value){
                                
                                //construction of rows having
                                // data from JSON object
                                dynEvents += '<tr>';
                                dynEvents += '<td>' +
                                    value.title + '</td>';
                                
                                dynEvents += '<td>' +
                                    value.description + '</td>';
 
                                dynEvents += '<td>' +
                                    value.datetime + '</td>';

                                dynEvents += '<td>' +
                                    value.capacity + '</td>';

                                dynEvents += '<td>' +
                                    value.location + '</td>';                                   
                                
                                dynEvents += '</tr>';

                        
                            });
                            //Insert row into table
                            $('#eventsTBody').append(dynEvents);
                        });
            });
        }
        </script>


    </tbody>

</table>


</body>
</html>